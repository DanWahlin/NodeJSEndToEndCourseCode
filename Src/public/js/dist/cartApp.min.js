!function(){var t=angular.module("codeWithDan",["ngRoute","ngAnimate"]);t.config(function(t){t.when("/",{controller:"CartController",templateUrl:"/app/views/cart.html",controllerAs:"vm"}).when("/checkout",{controller:"CheckoutController",templateUrl:"/app/views/checkout.html",controllerAs:"vm"}).when("/completedOrder",{controller:"CompletedOrderController",templateUrl:"/app/views/completedOrder.html",controllerAs:"vm"}).otherwise({redirectTo:"/"})})}(),function(){var t=function(t){var e="/api/cart/";csrf=codeWithDan.csrf,service=this,service.getCart=function(){return t.get(e)},service.putCart=function(o){return t.put(e,{_csrf:csrf,cart:o})},service.applyDiscountCode=function(o){return t.post(e+"discountcode",{_csrf:csrf,discountCode:o})},service.checkout=function(o){return t.post(e+"checkout",{_csrf:csrf,cart:o})},service.completeOrder=function(o){return t.post(e+"completeOrder",{_csrf:csrf,checkoutData:o})},service.clearCart=function(){return t.post(e+"clear",{_csrf:csrf})}};t.$inject=["$http"],angular.module("codeWithDan").service("cartService",t)}(),function(){var t=function(t,e,o){function c(){o.getCart().success(function(t){n.cart=t.cart,r()}).error(function(){})}function r(){codeWithDan.shoppingCart.updateValues(n.cart),n.cart&&n.cart.items&&n.cart.items.length?n.showDiscountCodeSection=!n.cart.discountCode&&!n.cart.itemHasDiscountCode:(n.showDiscountCodeSection=!1,n.showDiscountCode=!1,n.discountCode=null,n.discountCodeMessage=null,n.discountCodeClass=null)}var n=this;n.cart=null,n.showDiscountCodeSection=!1,n.showDiscountCode=!1,n.discountCode=null,n.discountCodeMessage=null,n.discountCodeClass=null,n.isCartEditable=!0,n.checkoutText="Check Out",n.displayDiscountCode=function(){n.showDiscountCode=!0},n.updateTotal=function(t){""!==t.quantity&&(t.quantity=parseInt(t.quantity),o.putCart(n.cart).success(function(t){n.cart=t.cart,r()}).error(function(){alert("Sorry, unable to update your cart due to an error.")}))},n.applyDiscountCode=function(){n.discountCode&&n.cart&&n.cart.items.length&&o.applyDiscountCode(n.discountCode).success(function(t){n.cart=t.cart,n.discountCodeMessage=t.discountCodeMessage,n.discountCodeClass=t.discountCodeStatus?"bg-success":"bg-danger",n.discountCode=""}).error(function(){n.discountCodeError="Sorry, unable to apply that discount code."})},n.checkout=function(){o.checkout(n.cart).success(function(o){o.isAuthenticated?e.path("/checkout"):t.location.href="/login"}).error(function(){alert("Sorry, uanble to navigate to the checkout page due to an error.")})},c()};t.$inject=["$window","$location","cartService"],angular.module("codeWithDan").controller("CartController",t)}(),function(){var t=function(t,e){function o(){e.getCart().success(function(e){e&&e.cart&&e.cart.items.length>0?c.cart=e.cart:t.path("/cart")}).error(function(){})}var c=this;c.cart=null,c.isCartEditable=!1,c.error=null,c.orderInProcess=!1,c.checkoutData={name:null,creditCardNumber:"4005 5192 0000 0004",expirationMonth:null,expirationYear:null,cvvCode:null},c.completeOrder=function(){c.orderInProcess=!0,e.completeOrder(c.checkoutData).success(function(e){e.transactionResult.success?(c.cart=e.cart,t.path("/completedOrder")):c.error="Oops - looks like a problem occurred: "+e.transactionResult.message}).error(function(){})},o()};t.$inject=["$location","cartService"],angular.module("codeWithDan").controller("CheckoutController",t)}(),function(){var t=function(t){function e(){t.getCart().success(function(e){o.cart=e.cart,codeWithDan.shoppingCart.updateValues({total:0}),t.clearCart().success(function(t){})}).error(function(){})}var o=this;o.cart=null,o.isCartEditable=!1,e()};t.$inject=["cartService"],angular.module("codeWithDan").controller("CompletedOrderController",t)}();